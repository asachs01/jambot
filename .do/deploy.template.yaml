spec:
  name: jambot
  region: nyc
  services:
    - name: jambot
      github:
        branch: main
        deploy_on_push: true
        repo: asachs01/jambot

      dockerfile_path: Dockerfile

      instance_count: 1
      instance_size_slug: basic-xxs

      http_port: 8080

      routes:
        - path: /

      health_check:
        http_path: /health
        initial_delay_seconds: 10
        period_seconds: 10
        timeout_seconds: 5
        success_threshold: 1
        failure_threshold: 3

      envs:
        - key: DISCORD_BOT_TOKEN
          scope: RUN_TIME
          type: SECRET
        - key: SPOTIFY_CLIENT_ID
          scope: RUN_TIME
          type: SECRET
        - key: SPOTIFY_CLIENT_SECRET
          scope: RUN_TIME
          type: SECRET
        - key: SPOTIFY_REDIRECT_URI
          scope: RUN_TIME
          value: ${APP_URL}/callback
        - key: DATABASE_URL
          scope: RUN_TIME
          type: SECRET
        - key: PORT
          scope: RUN_TIME
          value: "8080"
